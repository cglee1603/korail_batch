# Management API 설정 (RAGFlow API Key 대신 사용자명/비밀번호)
MANAGEMENT_USERNAME=admin
MANAGEMENT_PASSWORD=12345678
RAGFLOW_BASE_URL=http://localhost:5000

# 지식베이스 권한 설정
# "me" - 나만 사용 (기본값)
# "team" - 팀 전체 공유
DATASET_PERMISSION=me

# ⚠️ DATASET_LANGUAGE는 더 이상 사용되지 않습니다
# RAGFlow API에서 language 파라미터를 지원하지 않습니다
# DATASET_LANGUAGE=Korean

# 임베딩 모델 설정
# ⚠️ 주의: 이 설정은 현재 사용되지 않습니다 (config.py에서 None으로 고정)
# 지식베이스는 자동으로 tenant의 기본 임베딩 모델(tenant.embd_id)을 사용합니다
# RAGFlow UI에서 설정된 기본 모델이 자동으로 적용됩니다
# EMBEDDING_MODEL=BAAI/bge-large-zh-v1.5  # (현재 무시됨)

# ==================== Parser 설정 (GUI와 동일하게) ====================

# 파싱 방법 (parse_method)
# - "naive": 일반 텍스트 분할 (기본값, 권장)
# - "qa": Q&A 형식
# - "manual": 수동 분할
# - "paper": 논문 형식
# - "book": 책 형식
# - "laws": 법률 문서
# - "presentation": 프레젠테이션
# - "knowledge_graph": 지식 그래프
PARSE_METHOD=naive

# 청크당 토큰 수 (기본: 512 - GUI 기본값)
# 값이 클수록 더 큰 단위로 분할됨 (문맥 유지에 유리하지만 검색 정확도 저하 가능)
# 권장값: 128-512
CHUNK_TOKEN_NUM=512

# 텍스트 구분자 (기본: 줄바꿈과 문장 종결 기호)
# 이 문자들을 기준으로 청크를 나눔
DELIMITER=\\n!?;。；！？

# 레이아웃 인식 방법
# - "MinerU": MinerU 모델 사용 (기본값, 권장) - 한국어 지원
# - "DeepDOC": DeepDOC 모델 사용 (구버전)
LAYOUT_RECOGNIZE=MinerU

# Excel HTML 변환 사용 여부 (true/false)
HTML4EXCEL=false

# 자동 키워드 추출 (0: 비활성화, N: N개 키워드 추출)
# 청크마다 자동으로 키워드를 추출합니다 (LLM 호출 발생)
AUTO_KEYWORDS=0

# 자동 질문 생성 (0: 비활성화, N: N개 질문 생성)
# 청크마다 자동으로 질문을 생성합니다 (LLM 호출 발생)
AUTO_QUESTIONS=0

# GraphRAG 사용 여부 (true/false)
# ⚠️ 경고: 그래프 기반 RAG를 활성화하면 처리 시간이 매우 길어집니다
USE_GRAPHRAG=false

# Raptor 계층적 요약 사용 여부 (true/false)
# ⚠️  경고: true로 설정하면 문서를 계층적으로 요약하여 더 나은 검색 성능 제공
# 하지만 처리 시간이 매우 길어지고 LLM 호출이 많이 발생합니다!
# Raptor: Recursive Abstractive Processing for Tree-Organized Retrieval
USE_RAPTOR=false

# === Raptor 고급 설정 ===
# ⚠️ 참고: 현재 GUI와의 호환성을 위해 Raptor는 on/off만 지원합니다
# 아래 고급 설정들은 향후 지원될 수 있으나 현재는 사용되지 않습니다
# GUI에서 Raptor를 활성화하면 RAGFlow 서버의 기본 설정이 자동 적용됩니다

# # LLM에 전달할 요약 프롬프트 (미지원)
# # {cluster_content}는 자동으로 실제 내용으로 치환됨
# RAPTOR_PROMPT=Please summarize the following paragraphs. Be careful with the numbers, do not make things up. Paragraphs as following:\n{cluster_content}\nThe above is the content you need to summarize.

# # 요약할 때 생성할 최대 토큰 수 (기본: 256, 미지원)
# RAPTOR_MAX_TOKEN=256

# # 클러스터링 임계값 (기본: 0.1, 범위: 0.0-1.0, 미지원)
# # 값이 작을수록 더 많은 클러스터 생성
# RAPTOR_THRESHOLD=0.1

# # 랜덤 시드 (재현 가능한 결과를 위해 사용, 미지원)
# # 0 = 고정된 시드, 다른 값 = 해당 시드 사용
# RAPTOR_RANDOM_SEED=0

# # 최대 클러스터 수 (기본: 64, 미지원)
# RAPTOR_MAX_CLUSTER=64

# 고급 설정: JSON 형태로 전체 parser_config 직접 지정 (선택사항)
# 위의 개별 설정보다 우선 적용됨
# 예: PARSER_CONFIG={"chunk_token_num": 256, "delimiter": "\\n", "layout_recognize": "MinerU"}
# PARSER_CONFIG=

# 배치 설정
EXCEL_FILE_PATH=./data/input.xlsx
DOWNLOAD_DIR=./data/downloads
TEMP_DIR=./data/temp
LOG_DIR=./logs

# 스케줄 설정 (cron 형식 또는 시간 간격)
# 예: "10:00", "14:00" (매일 특정 시간)
# 또는 "300" (300초마다)
BATCH_SCHEDULE=10:00

# ==================== 파싱 진행 상황 모니터링 ====================
# 파싱 진행 상황을 실시간으로 모니터링할지 여부
# true: 파싱이 완료될 때까지 대기하며 진행 상황 출력
# false: 파싱 시작만 하고 백그라운드로 실행 (권장)
MONITOR_PARSE_PROGRESS=false

# 파싱 모니터링 최대 대기 시간 (분)
# MONITOR_PARSE_PROGRESS=true일 때만 적용
# 이 시간이 지나면 모니터링 종료 (파싱은 계속 진행됨)
PARSE_TIMEOUT_MINUTES=30

# ==================== Revision DB 설정 (PostgreSQL) ====================
# Revision 관리용 PostgreSQL 데이터베이스 연결 문자열
# 형식: postgresql://username:password@host:port/database_name
# 주의: 데이터베이스는 미리 생성되어 있어야 합니다
# 예시: postgresql://ragflow:ragflow@localhost:5432/ragflow_revision
REVISION_DB_CONNECTION_STRING=postgresql://ragflow:ragflow@localhost:5432/ragflow_revision

# ==================== 지식베이스 분할 설정 ====================
# 시트별 지식베이스당 최대 문서 수
# 특정 시트에 문서가 많을 경우 자동으로 여러 지식베이스로 분할됩니다
# 예: MAX_DOCUMENTS_PER_DATASET=100이고 시트에 250개 문서가 있으면
#     "시트명_part1" (100개), "시트명_part2" (100개), "시트명_part3" (50개)로 분할
# 기본값: 100개
MAX_DOCUMENTS_PER_DATASET=100

# ==================== 테스트 모드 설정 ====================
# 테스트 모드 활성화 여부 (true/false)
# true로 설정하면 제한된 시트와 행만 처리하여 빠른 테스트 가능
TEST_MODE=false

# 테스트 모드일 때 처리할 최대 시트 수 (0 = 무제한)
TEST_MAX_SHEETS=2

# 테스트 모드일 때 시트당 처리할 최대 행 수 (0 = 무제한)
TEST_MAX_ROWS=2

# ==================== 데이터베이스 설정 (선택) ====================
# 데이터 소스 선택
# "excel" - 엑셀 파일만 사용 (기본값)
# "db" - 데이터베이스만 사용
# "both" - 엑셀과 DB 모두 사용
DATA_SOURCE=both

# DB 연결 문자열
# PostgreSQL: postgresql://user:password@localhost:5432/database_name
# MySQL:      mysql://user:password@localhost:3306/database_name  
# MSSQL:      mssql://user:password@localhost:1433/database_name
# Oracle:     oracle://user:password@localhost:1521/database_name
DB_CONNECTION_STRING=

# SQL 파일 경로
DB_SQL_FILE_PATH=./data/query.sql

# DB 내용을 텍스트 파일로 변환
# 텍스트로 변환할 컬럼들을 콤마로 구분하여 지정
# 예: title,content,description
DB_CONTENT_COLUMNS=title,content

# 메타데이터로 사용할 컬럼 (선택사항)
# 비어있으면 모든 컬럼을 메타데이터로 사용
# 특정 컬럼만 사용하려면 콤마로 구분
# 예: category,author,created_at,department
DB_METADATA_COLUMNS=

# ==================== 사용 예시 ====================

# [예시 1] PostgreSQL 사용
# DATA_SOURCE=db
# DB_CONNECTION_STRING=postgresql://ragflow:password@localhost:5432/documents
# DB_SQL_FILE_PATH=./data/query.sql
# DB_CONTENT_COLUMNS=title,content
# DB_METADATA_COLUMNS=category,author,created_at

# [예시 2] MySQL 사용
# DATA_SOURCE=db
# DB_CONNECTION_STRING=mysql://admin:admin123@192.168.1.100:3306/knowledge_base
# DB_SQL_FILE_PATH=./data/query.sql
# DB_CONTENT_COLUMNS=regulation_name,regulation_content
# DB_METADATA_COLUMNS=department,effective_date

# [예시 3] Excel + DB 혼합 사용
# DATA_SOURCE=both
# EXCEL_FILE_PATH=./data/input.xlsx
# DB_CONNECTION_STRING=postgresql://user:pass@localhost:5432/db
# DB_SQL_FILE_PATH=./data/query.sql
# DB_CONTENT_COLUMNS=title,content

# ==================== 암복호화 설정 ====================
# 암복호화 기능 활성화 여부 (true/false)
# true로 설정 시 다운로드된 파일을 자동으로 복호화 처리
ENABLE_DECRYPTION=false

# Java 실행 파일 경로
# 기본값: "java" (PATH에 있는 경우)
# 절대 경로 지정 가능: "C:\Program Files\Java\jdk-11\bin\java.exe"
JAVA_EXECUTABLE=java

# 암복호화 JAR 파일 경로
# 회사에서 제공한 암복호화 툴의 JAR 파일 경로
# 예: ./lib/crypto.jar, C:\Tools\encryption\crypto.jar
DECRYPTION_JAR_PATH=

# 암복호화 클래스명
# JAR 파일 내의 복호화/암호화 클래스 이름
DECRYPTION_CLASS=Dec

# 암호화 체크 클래스명 (선택사항)
# 파일이 암호화되어 있는지 확인하는 클래스 이름
# 비어있으면 파일 헤더 시그니처로 확인
CHECK_CLASS=


# 복호화 타임아웃 (초)
# 파일 복호화 작업의 최대 대기 시간
# 기본값: 60초
DECRYPTION_TIMEOUT=60

# ==================== 암복호화 사용 예시 ====================
# [예시 1] 기본 설정
# ENABLE_DECRYPTION=true
# JAVA_EXECUTABLE=java
# DECRYPTION_JAR_PATH=./lib/crypto.jar
# DECRYPTION_CLASS=Dec
# CHECK_CLASS=CheckEncryption

# [예시 2] 키가 필요한 경우
# ENABLE_DECRYPTION=true
# JAVA_EXECUTABLE=C:\Program Files\Java\jdk-11\bin\java.exe
# DECRYPTION_JAR_PATH=C:\Tools\encryption\crypto.jar
# DECRYPTION_CLASS=DecryptFile

# 암복호화 툴 사용법:
# 1. 회사에서 제공한 암복호화 JAR 파일을 ./lib/ 디렉토리에 복사
# 2. 위의 설정을 적절히 수정
# 3. ENABLE_DECRYPTION=true로 설정
# 4. 배치 프로그램 실행 시 자동으로 암호화된 파일 복호화

# ==================== 다운로드 캐시 자동 정리 ====================

# 프로그램 시작 시 다운로드 캐시 자동 정리 (true/false)
# true로 설정하면 오래된 캐시를 자동으로 삭제하여 디스크 공간 절약
AUTO_CLEAN_DOWNLOAD_CACHE=false

# 자동 정리 시 보관할 캐시 일수 (이보다 오래된 캐시만 삭제)
# 0 = 전체 삭제, 양수 = N일 이상된 캐시만 삭제
# 예: 7이면 7일 이상 사용하지 않은 캐시 삭제
DOWNLOAD_CACHE_KEEP_DAYS=7

# 사용 예시:
# AUTO_CLEAN_DOWNLOAD_CACHE=true
# DOWNLOAD_CACHE_KEEP_DAYS=30  # 30일 이상된 캐시만 삭제

# 수동 정리:
# python scripts/clean_download_cache.py              # 7일 이상된 캐시 정리
# python scripts/clean_download_cache.py --days 30    # 30일 이상된 캐시 정리
# python scripts/clean_download_cache.py --all        # 전체 캐시 정리

